
# 13. Dada una pila con los trajes de Iron Man utilizados en las películas de Marvel Cinematic Uni-
# verse (MCU) de los cuales se conoce el nombre del modelo, nombre de la película en la que se
# usó y el estado en que quedó al final de la película (Dañado, Impecable, Destruido), resolver
# las siguientes actividades:
# a. determinar si el modelo Mark XLIV (Hulkbuster) fue utilizado en alguna de las películas,
# además mostrar el nombre de dichas películas;
# b. mostrar los modelos que quedaron dañados, sin perder información de la pila.
# c. eliminar los modelos de los trajes destruidos mostrando su nombre;
# d. un modelo de traje puede usarse en más de una película y en una película se pueden usar
# más de un modelo de traje, estos deben cargarse por separado;
# e. agregar el modelo Mark LXXXV a la pila, tener en cuenta que no se pueden cargar modelos
# repetidos en una misma película;
# f. mostrar los nombre de los trajes utilizados en las películas “Spider-Man: Homecoming” y
# “Capitan America: Civil War”.

pila_trajes = [
    {"modelo": "Mark III", "pelicula": "Iron Man", "estado": "Destruido"},
    {"modelo": "Mark XLIV", "pelicula": "Avengers: Age of Ultron", "estado": "Dañado"},
    {"modelo": "Mark L", "pelicula": "Avengers: Infinity War", "estado": "Impecable"},
    {"modelo": "Mark XLVII", "pelicula": "Spider-Man: Homecoming", "estado": "Dañado"},
    {"modelo": "Mark XLVI", "pelicula": "Captain America: Civil War", "estado": "Impecable"},
    {"modelo": "Mark XLV", "pelicula": "Avengers: Age of Ultron", "estado": "Destruido"}
]

class pila():

    def __init__(self):
        self.__element = []

    def size(self):
        return len(self.__element)
    
    def pop(self):
        if self.__element:
            return self.__element.pop()
        else:
            return None
         
    def push (self ,value):
        self.__element.append(value)

    def on_top(self):
        if self.__element:
            return self.__element[-1]
        else:
            return None
        
mi_pila = pila()

for traje in pila_trajes:
    mi_pila.push(traje)

#A
def punto_A_hulkbuster_con_aux(pila_original):
    pila_aux = pila()
    peliculas = []

    # Desapilar todo, filtrar, y guardar en auxiliar
    while pila_original.size() > 0:
        traje = pila_original.pop()

        if traje["modelo"] == "Mark XLIV":
            peliculas.append(traje["pelicula"])

        pila_aux.push(traje)

    # Restaurar la pila original (queda igual que antes)
    while pila_aux.size() > 0:
        pila_original.push(pila_aux.pop())

    #Mostrar resultado
    if peliculas:
        print("El modelo Mark XLIV (Hulkbuster) fue utilizado en las siguientes películas:")
        for peli in peliculas:
            print("-", peli)
    else:
        print("El modelo Mark XLIV (Hulkbuster) no fue utilizado en ninguna película.")

#B
def punto_B_danados_con_aux(pila_original):
    pila_aux = pila()
    
    print("Modelos que quedaron dañados:")

    # 1 Desapilar y filtrar
    while pila_original.size() > 0:
        traje = pila_original.pop()

        if traje["estado"] == "Dañado":
            print("-", traje["modelo"])

        pila_aux.push(traje)

    # 2 Restaurar pila original
    while pila_aux.size() > 0:
        pila_original.push(pila_aux.pop())

#C
def punto_B_danados_en_aux(pila_original):
    pila_aux = pila()
    pila_temp = pila()  # Para restaurar

    # 1Desapilar todo
    while pila_original.size() > 0:
        traje = pila_original.pop()

        if traje["estado"] == "Dañado":
            pila_aux.push(traje)

        pila_temp.push(traje)  # Guardamos todo para restaurar

    # 2Restaurar pila original
    while pila_temp.size() > 0:
        pila_original.push(pila_temp.pop())

    # 3Mostrar los dañados desde la pila auxiliar
    print("Modelos que quedaron dañados:")
    while pila_aux.size() > 0:
        traje = pila_aux.pop()
        print("-", traje["modelo"])

#E
def punto_E_agregar_modelo(pila_original, modelo, pelicula, estado):
    pila_aux = pila()
    repetido = False

    while pila_original.size() > 0:
        traje = pila_original.pop()

        if traje["modelo"] == modelo and traje["pelicula"] == pelicula:
            repetido = True

        pila_aux.push(traje)

    while pila_aux.size() > 0:
        pila_original.push(pila_aux.pop())

    if not repetido:
        nuevo_traje = {
            "modelo": modelo,
            "pelicula": pelicula,
            "estado": estado
        }
        pila_original.push(nuevo_traje)
        return True
    else:
        return False

#F
def punto_F_mostrar_trajes_en_peliculas(pila_original):
    pila_aux = pila()
    encontrados = []

    peliculas_objetivo = {
        "Spider-Man: Homecoming",
        "Captain America: Civil War"
    }

    # Desapilar todo, filtrar y guardar en auxiliar
    while pila_original.size() > 0:
        traje = pila_original.pop()

        if traje["pelicula"] in peliculas_objetivo:
            encontrados.append((traje["modelo"], traje["pelicula"]))

        pila_aux.push(traje)

    #  Restaurar la pila original (queda igual que antes)
    while pila_aux.size() > 0:
        pila_original.push(pila_aux.pop())

    #  Mostrar resultados
    if encontrados:
        print("Trajes usados en Spider-Man: Homecoming y Captain America: Civil War:")
        for modelo, peli in encontrados:
            print(f"- {modelo} se usó en {peli}")
    else:
        print("No se encontraron trajes en esas películas.")




#A
punto_A_hulkbuster_con_aux(mi_pila)

#B
punto_B_danados_con_aux(mi_pila)

#C
punto_B_danados_en_aux(mi_pila)

#E
agregado = punto_E_agregar_modelo(mi_pila, "Mark LXXXV", "Avengers: Endgame", "Impecable")

if agregado:
    print("Se agregó correctamente.")
else:
    print("No se agregó porque ya existía.")

#F
punto_F_mostrar_trajes_en_peliculas(mi_pila)
